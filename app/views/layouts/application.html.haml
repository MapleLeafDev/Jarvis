!!!
%html
  %head
    %title Jarvis
    <!--[if IE]><script scr="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script><![endif]-->
    = stylesheet_link_tag "application", :media => "all"
    = javascript_include_tag "application"
    = csrf_meta_tags
    %meta{:content => "width=device-width, initial-scale=1.0", :name => "viewport"}
.navbar.navbar-inverse.navbar-fixed-top
  .navbar-inner
    .container-fluid
      %a.btn.btn-navbar{"data-target" => ".nav-collapse", "data-toggle" => "collapse"}
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      = link_to image_tag("jarvis.png"), '#', class: "brand"
      .nav-collapse
        %div.visible-desktop
          %ul.nav.pull-right
            -if current_user
              %li.dropdown.userdrop
                %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
                  = current_user.name
                  %i.icon-chevron-down
                  = image_tag(gravatar_for(current_user.email == nil || current_user.email == "" ? current_user.name : current_user.email), size: "30x30")
                %ul.dropdown-menu
                  -if current_user.user_type >= 20
                    %li
                      %a{href: "#{edit_user_path(current_user)}"}
                        %i.icon-edit
                        Settings
                  %li
                    %a{href: "#{signout_path}"}
                      %i.icon-road
                      Sign Out
        %div.visible-phone.visible-tablet
          %ul.nav
            -if current_user
              -if current_user.user_type >= 20
                %li
                  %a{href: "#{edit_user_path(current_user)}"}
                    %i.icon-edit
                    Settings
              %li
                %a{href: "#{signout_path}"}
                  %i.icon-road
                  Sign Out
    %div.visible-desktop
      .container{style: "position:fixed; top:55px; right:55px; width:auto;"}
        -if flash.count > 0
          -flash.each do |name, msg|
            -if flash[:notice]
              .alert.fade.in.alert-success{align: "center"}
                =content_tag :div, msg, :id => "flash_#{name}"
            -else
              .alert.fade.in.alert-danger{align: "center"}
                =content_tag :div, msg, :id => "flash_#{name}"
    %div.visible-phone.visible-tablet
      .container{style: "position:fixed; width:98%;"}
        -if flash.count > 0
          -flash.each do |name, msg|
            -if flash[:notice]
              .alert.fade.in.alert-success{align: "center"}
                =content_tag :div, msg, :id => "flash_#{name}"
            -else
              .alert.fade.in.alert-danger{align: "center"}
                =content_tag :div, msg, :id => "flash_#{name}"
.container-fluid
  .row-fluid
    .span2
      -if current_user
        = render 'layouts/sidebar'
    .span10
      = yield

:javascript
  $('.dropdown-toggle').dropdown()